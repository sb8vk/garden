<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Saahithi Budharaju - Brain Space</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --purple: #9b59b6;
            --orange: #e74c3c;
            --gold: #f39c12;
            --dark: #1a1a1a;
            --gray: #6c757d;
            --light-gray: #b0b0b0;
            --bg: #fafafa;
            --card-width: 340px;
            --gap: 1.5rem;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg);
            color: var(--dark);
            line-height: 1.6;
            font-weight: 400;
            overflow-x: hidden;
        }

        /* Neural network canvas */
        #neuralCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        #neuralCanvas.dimmed {
            opacity: 0.25;
        }

        /* Main container */
        .container {
            position: relative;
            z-index: 1;
            max-width: 1400px;
            margin: 0 auto;
            padding: 3rem 2rem;
            min-height: 100vh;
        }

        /* Header */
        .header {
            margin-bottom: 3rem;
            padding: 2rem 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1.5rem;
        }

        .name {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
        }

        .greeting {
            font-size: 1.1rem;
            font-weight: 400;
            color: var(--dark);
            display: flex;
            align-items: baseline;
            white-space: nowrap;
        }

        .greeting-hi {
            font-weight: 400;
            color: var(--dark);
        }

        .greeting-name {
            font-weight: 400;
            color: var(--dark);
            position: relative;
        }

        /* Typing animation */
        @keyframes typing {
            from { max-width: 0; }
            to { max-width: 6em; }
        }

        @keyframes blink {
            50% { border-color: transparent; }
        }

        .typing-text {
            overflow: hidden;
            border-right: 2px solid var(--dark);
            white-space: nowrap;
            animation: typing 2s steps(10, end), blink 0.75s step-end infinite;
            display: inline-block;
            max-width: 6em;
        }

        .header-controls {
            display: flex;
            gap: 2rem;
            align-items: center;
            flex-wrap: wrap;
        }

        /* Dim toggle */
        .dim-toggle {
            background: white;
            border: 1px solid #e9ecef;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.85rem;
            color: var(--gray);
            transition: all 0.2s ease;
            font-family: 'Inter', sans-serif;
        }

        .dim-toggle:hover {
            border-color: var(--purple);
            color: var(--dark);
        }

        /* Navigation tabs */
        .nav-tabs {
            display: flex;
            gap: 2rem;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 0.5rem;
        }

        .nav-tab {
            color: var(--gray);
            font-size: 0.95rem;
            font-weight: 400;
            cursor: pointer;
            position: relative;
            transition: color 0.2s ease;
            white-space: nowrap;
        }

        .nav-tab:hover {
            color: var(--dark);
        }

        .nav-tab.active {
            color: var(--dark);
            font-weight: 500;
        }

        .nav-tab.active::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--purple), var(--orange), var(--gold));
        }

        /* Tab content */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Hero section */
        .hero {
            text-align: center;
            margin: 3rem auto 4rem;
            max-width: 700px;
        }

        .hero h1 {
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            font-weight: 300;
            line-height: 1.3;
            margin-bottom: 1rem;
            letter-spacing: -0.02em;
        }

        .gradient-text {
            font-weight: 500;
            background: linear-gradient(135deg, var(--purple) 0%, var(--orange) 50%, var(--gold) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-description {
            color: var(--gray);
            font-size: 1.05rem;
            line-height: 1.7;
        }

        /* Instructions */
        .instructions {
            text-align: center;
            margin: 0 auto 3rem;
            padding: 1.25rem;
            max-width: 600px;
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 12px;
            color: var(--gray);
            font-size: 0.9rem;
        }

        .instructions strong {
            color: var(--dark);
        }

        /* Masonry grid layout */
        .masonry-grid {
            column-count: 3;
            column-gap: var(--gap);
            max-width: 1200px;
            margin: 0 auto;
        }

        @media (max-width: 1024px) {
            .masonry-grid {
                column-count: 2;
            }
        }

        @media (max-width: 640px) {
            .masonry-grid {
                column-count: 1;
            }
        }

        /* Cards */
        .card {
            break-inside: avoid;
            margin-bottom: var(--gap);
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            opacity: 0;
            animation: slideUp 0.5s ease forwards;
        }

        @keyframes slideUp {
            to {
                opacity: 1;
            }
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
            border-color: var(--purple);
        }

        .card.highlighted {
            border-color: var(--purple);
            box-shadow: 0 0 0 3px rgba(155, 89, 182, 0.2);
            background: linear-gradient(135deg, rgba(155, 89, 182, 0.02) 0%, rgba(243, 156, 18, 0.02) 100%);
        }

        .card.mental-model {
            background: linear-gradient(135deg, rgba(155, 89, 182, 0.05) 0%, rgba(243, 156, 18, 0.05) 100%);
            border: 2px solid var(--purple);
        }

        .card.mental-model::before {
            content: '●';
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            color: var(--purple);
            font-size: 1.5rem;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.5; transform: translateX(-50%) scale(1); }
            50% { opacity: 1; transform: translateX(-50%) scale(1.2); }
        }

        /* Card content */
        .card-date {
            font-size: 0.75rem;
            color: var(--light-gray);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.5rem;
        }

        .card-title {
            font-size: 1.15rem;
            font-weight: 500;
            margin-bottom: 0.75rem;
            line-height: 1.4;
            color: var(--dark);
        }

        .card-excerpt {
            font-size: 0.9rem;
            color: var(--gray);
            line-height: 1.6;
            margin-bottom: 0.75rem;
        }

        .card-connection {
            font-size: 0.8rem;
            font-style: italic;
            margin-top: 0.75rem;
            padding-top: 0.75rem;
            border-top: 1px solid #f1f3f4;
        }

        .card-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.4rem;
            margin-top: 0.75rem;
        }

        .card-tag {
            font-size: 0.7rem;
            color: var(--light-gray);
            background: #f8f9fa;
            padding: 0.25rem 0.6rem;
            border-radius: 10px;
        }

        /* Category colors */
        .card[data-category="shipping"] .card-connection {
            color: var(--purple);
        }

        .card[data-category="developing"] .card-connection {
            color: var(--orange);
        }

        .card[data-category="learning"] .card-connection {
            color: var(--gold);
        }



        /* Responsive */
        @media (max-width: 768px) {
            :root {
                --card-width: 100%;
                --gap: 1rem;
            }

            #neuralCanvas {
                display: none;
            }

            .container {
                padding: 2rem 1rem;
            }

            .header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .name {
                flex-direction: row;
                align-items: center;
                gap: 0.75rem;
            }

            .avatar {
                width: 100px;
                height: 100px;
            }

            .greeting {
                font-size: 1rem;
            }

            .header-controls {
                width: 100%;
                justify-content: space-between;
            }

            .nav-tabs {
                gap: 1rem;
                font-size: 0.9rem;
            }

            .hero {
                margin: 2rem auto 3rem;
            }
        }
    </style>
</head>
<body>
    <canvas id="neuralCanvas"></canvas>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="name">
                <img src="avatar.png" alt="Saahithi" class="avatar">
                <div class="greeting">
                    <span class="greeting-hi">hi! i'm </span><span class="greeting-name typing-text">saahithi.</span>
                </div>
            </div>
            <div class="header-controls">
                <button class="dim-toggle" id="dimToggle">
                    <span id="dimText">brighten network</span>
                </button>
                <nav class="nav-tabs">
                    <div class="nav-tab active" data-tab="learning">currently learning</div>
                    <div class="nav-tab" data-tab="retrospect">in retrospect</div>
                    <div class="nav-tab" data-tab="models">mental models</div>
                </nav>
            </div>
        </header>

        <!-- Currently Learning Tab -->
        <div class="tab-content active" data-tab-content="learning">
            <div class="hero">
                <h1>What I'm <span class="gradient-text">learning now</span></h1>
                <p class="hero-description">Active explorations, experiments in progress, and emerging patterns. These synapses are still firing—connections forming in real time.</p>
            </div>

            <div class="masonry-grid" id="learningGrid"></div>
        </div>

        <!-- In Retrospect Tab -->
        <div class="tab-content" data-tab-content="retrospect">
            <div class="hero">
                <h1>Looking <span class="gradient-text">back</span></h1>
                <p class="hero-description">Solidified lessons, completed projects, and established pathways. These connections have strengthened through time and reflection.</p>
            </div>

            <div class="masonry-grid" id="retrospectGrid"></div>
        </div>

        <!-- Mental Models Tab -->
        <div class="tab-content" data-tab-content="models">
            <div class="hero">
                <h1>Core <span class="gradient-text">frameworks</span></h1>
                <p class="hero-description">The mental models that anchor my thinking. Everything connects back to these foundational patterns.</p>
            </div>

            <div class="masonry-grid" id="modelsGrid"></div>
        </div>
    </div>

    <script>
        // ============================================
        // CONTENT DATA - EDIT THIS TO ADD NEW CARDS
        // ============================================
        // 
        // HOW TO ADD NEW CONTENT:
        // 
        // 1. Mental Models: Add to CONTENT.mentalModels array
        //    Required fields: id, title, description, category
        //    Category options: 'shipping', 'developing', 'learning'
        //
        // 2. Currently Learning: Add to CONTENT.currentlyLearning array
        //    Required fields: date, title, excerpt, category, models, connection
        //    models: array of mental model IDs this connects to
        //
        // 3. In Retrospect: Add to CONTENT.inRetrospect array
        //    Same structure as Currently Learning
        //
        // Changes are immediate - just refresh the page!
        // ============================================
        
        const CONTENT = {
            mentalModels: [
                {
                    id: 'compound',
                    title: 'The Compound Garden',
                    description: 'Small consistent actions create exponential results. A young girl planted a single apple seed. Years later, that tree dropped seeds, creating more trees. Time and patience turned one seed into endless fruit.',
                    category: 'learning'
                },
                {
                    id: 'stone-soup',
                    title: 'The Stone Soup Village',
                    description: 'Combining resources multiplies individual power. A traveler with only a pot and stone convinced a village to make soup together. The stone was worthless—the real magic was cooperation.',
                    category: 'developing'
                },
                {
                    id: 'perfect',
                    title: 'The Boy Who Cried "Perfect"',
                    description: 'Waiting for perfect means missing good enough. A boy refused every apple at the market, seeking the perfect one. By sunset, all apples were gone. Perfection is the enemy of progress.',
                    category: 'shipping'
                },
                {
                    id: 'two-buckets',
                    title: 'The Two Buckets',
                    description: 'Focus energy only on what you can change. Two farmers faced drought. One cursed the sky daily. The other dug a deeper well. Control what you can control.',
                    category: 'learning'
                },
                {
                    id: 'bridge-builder',
                    title: 'The Bridge Builder\'s Apprentice',
                    description: 'Break complex problems into basic truths. By learning gravity and support, not just copying bridges, the apprentice later built bridges no one had imagined.',
                    category: 'shipping'
                },
                {
                    id: 'merchant-scale',
                    title: 'The Merchant\'s Scale',
                    description: 'Seek small risks with large rewards. A merchant noticed rare spices cost little in the port but sold high inland. Small bets, big potential.',
                    category: 'shipping'
                },
                {
                    id: 'river-stone',
                    title: 'The River Stone',
                    description: 'Bend with forces rather than break against them. A mighty oak snapped in the storm while reeds survived. Rigidity breaks; flexibility endures.',
                    category: 'learning'
                },
                {
                    id: 'mapmaker',
                    title: 'The Mapmaker\'s Daughter',
                    description: 'Good maps make any journey easier. A mapmaker taught his daughter to draw maps of everything. Maps are just ways of remembering what works.',
                    category: 'learning'
                },
                {
                    id: 'fisherman-net',
                    title: 'The Fisherman\'s Net',
                    description: 'Value grows with connections. A fisherman with one line caught one fish. His friend wove a net—each knot strengthened others. Connections multiply strength beyond addition.',
                    category: 'developing'
                },
                {
                    id: 'shadow-counter',
                    title: 'The Shadow Counter',
                    description: 'Consider consequences of consequences. Children freed all rabbits to be kind. Rabbits multiplied, ate crops, and the village starved. Count not just the action, but its shadow.',
                    category: 'learning'
                },
                {
                    id: 'potter-wheel',
                    title: 'The Potter\'s Wheel',
                    description: 'Failure is data for improvement. A potter\'s first hundred pots cracked. Each crack taught her about heat, clay, and timing. These aren\'t failures—they\'re teachers.',
                    category: 'learning'
                },
                {
                    id: 'lighthouse',
                    title: 'The Lighthouse Keeper',
                    description: 'Delayed gratification for lasting rewards. Villagers mocked the lighthouse keeper for working while they played. But when storms came, his light saved ships. Daily discipline creates invisible protection.',
                    category: 'shipping'
                }
            ],

            currentlyLearning: [
                {
                    date: 'Dec 2024',
                    title: 'Model Context Protocol & Claude',
                    excerpt: 'MCP lets Claude work directly inside Notion. By connecting the two, you can build project templates and manage tasks natively—no more copy-paste between apps.',
                    category: 'shipping',
                    models: ['bridge-builder', 'mapmaker'],
                    connection: '→ Breaking down complex integrations into simple building blocks'
                },
                {
                    date: 'Dec 2024',
                    title: 'First Week in Evanston',
                    excerpt: 'Moving to a new city. Learning to trust strangers, build routines from scratch, and let unfamiliar places become home. Day one: no furniture, no A/C, just possibility.',
                    category: 'learning',
                    models: ['river-stone', 'two-buckets'],
                    connection: '→ Adapting to new environments while controlling what I can'
                },
                {
                    date: 'Nov 2024',
                    title: 'Balancing Ambition with Presence',
                    excerpt: 'Noticing the tension between wanting to achieve more and wanting to be more present. The ambitious part wants the next milestone. The present part knows this moment is enough.',
                    category: 'learning',
                    models: ['two-buckets', 'lighthouse'],
                    connection: '→ Managing competing priorities through deliberate choice'
                },
                {
                    date: 'Nov 2024',
                    title: 'Building This Website',
                    excerpt: 'Iterating on design, trying to capture personality in pixels. Learning when "good enough" beats "perfect." The first version was too complicated. This one might be too simple. The next will be just right.',
                    category: 'shipping',
                    models: ['perfect', 'potter-wheel'],
                    connection: '→ Shipping vs perfecting—each iteration teaches something new'
                },
                {
                    date: 'Nov 2024',
                    title: 'Reading "Range" by David Epstein',
                    excerpt: 'Why generalists triumph in a specialized world. Early specialization gets you ahead initially, but broad experience creates better problem-solvers. My path makes more sense now: statistics → cognitive science → consulting → AI → MBA.',
                    category: 'learning',
                    models: ['compound', 'mapmaker'],
                    connection: '→ Each detour was building the map, not losing the way'
                }
            ],

            inRetrospect: [
                {
                    date: 'Oct 2024',
                    title: 'Scaling AI from Pilot to Enterprise',
                    excerpt: 'User resistance isn\'t about tech—it\'s about trust and workflow disruption. The best AI products feel invisible. Start with the smallest possible win: a 30-person pilot that works beats a 1000-person rollout that fails.',
                    category: 'shipping',
                    models: ['merchant-scale', 'compound'],
                    connection: '→ Small bets compound into big wins when they actually work'
                },
                {
                    date: 'Sep 2024',
                    title: 'What 20+ Interns Taught Me About Mentorship',
                    excerpt: 'The best mentorship moments weren\'t scheduled 1:1s. They were the 9pm Slacks about broken code, the coffee chats about career doubt, the side conversations about imposter syndrome. Good mentorship isn\'t having all the answers—it\'s making space for someone to find their own.',
                    category: 'developing',
                    models: ['stone-soup', 'fisherman-net'],
                    connection: '→ Building through connection, not authority'
                },
                {
                    date: 'Sep 2024',
                    title: 'The Code Review That Changed My Feedback',
                    excerpt: 'An intern submitted messy code. My first draft review was harsh: "This is wrong." Then I remembered being 21, terrified of my first PR. I rewrote every comment to show my thinking instead of just pointing out errors. The intern\'s next PR was excellent—not because they feared my feedback, but because they understood my reasoning.',
                    category: 'developing',
                    models: ['potter-wheel', 'bridge-builder'],
                    connection: '→ Learning from failure together, not judging it alone'
                },
                {
                    date: 'Aug 2024',
                    title: 'Five Years at Deloitte',
                    excerpt: 'Built AI products, led teams, ran workshops for 1100+ practitioners, coached 20+ interns. The work was good. But what I loved most was watching people get unstuck—that moment when confusion clicks into clarity. I wasn\'t just building products. I was building people\'s confidence.',
                    category: 'developing',
                    models: ['compound', 'fisherman-net', 'lighthouse'],
                    connection: '→ Consistent investment in people creates lasting impact'
                },
                {
                    date: 'Jul 2024',
                    title: 'Deciding to Leave Consulting for Kellogg',
                    excerpt: 'Chose learning over comfort. Chose building for myself over building for clients. Chose two years of tuition over two years of salary. The decision terrified me. But the alternative—staying comfortable—terrified me more.',
                    category: 'learning',
                    models: ['river-stone', 'two-buckets', 'lighthouse'],
                    connection: '→ Bending toward growth, controlling what I could, trusting the compound effect'
                },
                {
                    date: 'Jun 2024',
                    title: 'Leading AI Product Launch ($17M Revenue)',
                    excerpt: 'Directed a 6-person team to develop go-to-market strategy for an AI productivity suite. The product was solid. But the real work was building GTM materials that made sales teams confident enough to sell it. Product launches aren\'t about features—they\'re about reducing fear of the unknown.',
                    category: 'shipping',
                    models: ['bridge-builder', 'stone-soup', 'mapmaker'],
                    connection: '→ Breaking complexity down, combining team strengths, mapping the journey'
                },
                {
                    date: 'May 2024',
                    title: 'When the Pilot Failed',
                    excerpt: 'Spent 8 weeks building an AI onboarding chatbot. 30-person pilot. Adoption rate: 12%. The tech worked. The UX was clean. But we solved a problem users didn\'t actually have. The hardest lesson: execution doesn\'t matter if you\'re executing the wrong thing.',
                    category: 'shipping',
                    models: ['potter-wheel', 'shadow-counter', 'two-buckets'],
                    connection: '→ Failure as data. Count the consequences. Control what you can: learn and move on.'
                }
            ]
        };

        // ============================================
        // APPLICATION STATE & CORE FUNCTIONALITY
        // ============================================

        let canvas, ctx;
        let particles = [];
        let isDimmed = true; // Default to dimmed
        let currentTab = 'learning';
        let highlightedModels = new Set();
        let activeCardPosition = null; // Track selected card position for neural brightening

        // Initialize on load
        document.addEventListener('DOMContentLoaded', () => {
            initializeCanvas();
            renderAllContent();
            setupEventListeners();
            startAnimation();
        });

        // ============================================
        // CANVAS & NEURAL NETWORK
        // ============================================

        function initializeCanvas() {
            canvas = document.getElementById('neuralCanvas');
            ctx = canvas.getContext('2d');
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            
            // Set canvas to dimmed by default
            canvas.classList.add('dimmed');
            
            // Create particles
            const particleCount = window.innerWidth < 768 ? 0 : 100;
            for (let i = 0; i < particleCount; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    vx: (Math.random() - 0.5) * 0.3,
                    vy: (Math.random() - 0.5) * 0.3,
                    radius: Math.random() * 2 + 2 // Increased from 1-3 to 2-4
                });
            }
        }

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }

        function startAnimation() {
            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Update and draw particles
                particles.forEach(p => {
                    // If a card is selected, particles near it move faster (synapses firing)
                    let speed = 1;
                    if (activeCardPosition) {
                        const dx = p.x - activeCardPosition.x;
                        const dy = p.y - activeCardPosition.y;
                        const distToActive = Math.sqrt(dx * dx + dy * dy);
                        if (distToActive < 300) {
                            speed = 2 + (1 - distToActive / 300); // Speed up near active card
                        }
                    }
                    
                    p.x += p.vx * speed;
                    p.y += p.vy * speed;
                    if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
                    if (p.y < 0 || p.y > canvas.height) p.vy *= -1;
                });
                
                // Draw connections
                for (let i = 0; i < particles.length; i++) {
                    for (let j = i + 1; j < particles.length; j++) {
                        const dx = particles[i].x - particles[j].x;
                        const dy = particles[i].y - particles[j].y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance < 150) {
                            let baseOpacity = (1 - distance / 150) * 0.4; // Increased from 0.2 to 0.4
                            let distToActive = Infinity; // Initialize outside the if block
                            
                            // Brighten connections near active card
                            if (activeCardPosition) {
                                const midX = (particles[i].x + particles[j].x) / 2;
                                const midY = (particles[i].y + particles[j].y) / 2;
                                const dxToActive = midX - activeCardPosition.x;
                                const dyToActive = midY - activeCardPosition.y;
                                distToActive = Math.sqrt(dxToActive * dxToActive + dyToActive * dyToActive);
                                
                                if (distToActive < 300) {
                                    // Brighten nearby connections MORE
                                    const brightnessFactor = 1 - distToActive / 300;
                                    baseOpacity *= (1 + brightnessFactor * 8); // Increased from 3 to 8 (up to 9x brighter)
                                } else {
                                    // Dim distant connections
                                    baseOpacity *= 0.2; // Reduced from 0.3 to 0.2 for more contrast
                                }
                            }
                            
                            const gradient = ctx.createLinearGradient(
                                particles[i].x, particles[i].y,
                                particles[j].x, particles[j].y
                            );
                            gradient.addColorStop(0, `rgba(155, 89, 182, ${baseOpacity})`);
                            gradient.addColorStop(0.5, `rgba(231, 76, 60, ${baseOpacity})`);
                            gradient.addColorStop(1, `rgba(243, 156, 18, ${baseOpacity})`);
                            
                            // Add glow effect when active
                            if (activeCardPosition && distToActive < 300) {
                                ctx.shadowBlur = 10;
                                ctx.shadowColor = `rgba(155, 89, 182, ${baseOpacity * 0.5})`;
                            } else {
                                ctx.shadowBlur = 0;
                            }
                            
                            ctx.strokeStyle = gradient;
                            ctx.lineWidth = activeCardPosition && distToActive < 300 ? 2 : 1; // Increased from 0.5/1 to 1/2
                            ctx.beginPath();
                            ctx.moveTo(particles[i].x, particles[i].y);
                            ctx.lineTo(particles[j].x, particles[j].y);
                            ctx.stroke();
                        }
                    }
                }
                
                // Draw particles
                particles.forEach(p => {
                    let particleOpacity = 0.6; // Increased from 0.5
                    let particleSize = p.radius;
                    
                    // Brighten particles near active card
                    if (activeCardPosition) {
                        const dx = p.x - activeCardPosition.x;
                        const dy = p.y - activeCardPosition.y;
                        const distToActive = Math.sqrt(dx * dx + dy * dy);
                        if (distToActive < 300) {
                            const brightnessFactor = 1 - distToActive / 300;
                            particleOpacity = 0.6 + brightnessFactor * 0.4; // Up to full opacity
                            particleSize = p.radius * (1 + brightnessFactor * 0.5); // Grow bigger when active
                            
                            // Add glow
                            ctx.shadowBlur = 15;
                            ctx.shadowColor = `rgba(155, 89, 182, ${particleOpacity})`;
                        } else {
                            particleOpacity = 0.15; // Reduced from 0.2 for more contrast
                            ctx.shadowBlur = 0;
                        }
                    } else {
                        ctx.shadowBlur = 0;
                    }
                    
                    ctx.fillStyle = `rgba(155, 89, 182, ${particleOpacity})`;
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, particleSize, 0, Math.PI * 2);
                    ctx.fill();
                });
                
                requestAnimationFrame(animate);
            }
            animate();
        }

        // ============================================
        // CONTENT RENDERING
        // ============================================

        function renderAllContent() {
            renderMentalModels();
            renderCurrentlyLearning();
            renderInRetrospect();
        }

        function renderMentalModels() {
            const grid = document.getElementById('modelsGrid');
            grid.innerHTML = '';
            
            CONTENT.mentalModels.forEach((model, index) => {
                const card = createCard({
                    ...model,
                    type: 'mental-model'
                }, index);
                grid.appendChild(card);
            });
        }

        function renderCurrentlyLearning() {
            const grid = document.getElementById('learningGrid');
            grid.innerHTML = '';
            
            CONTENT.currentlyLearning.forEach((item, index) => {
                const card = createCard(item, index);
                grid.appendChild(card);
            });
        }

        function renderInRetrospect() {
            const grid = document.getElementById('retrospectGrid');
            grid.innerHTML = '';
            
            CONTENT.inRetrospect.forEach((item, index) => {
                const card = createCard(item, index);
                grid.appendChild(card);
            });
        }

        function createCard(data, index) {
            const card = document.createElement('div');
            card.className = 'card';
            card.style.animationDelay = `${index * 0.1}s`;
            
            if (data.type === 'mental-model') {
                card.classList.add('mental-model');
                card.dataset.modelId = data.id;
                card.innerHTML = `
                    <div class="card-title">${data.title}</div>
                    <div class="card-excerpt">${data.description}</div>
                    <div class="card-tags">
                        <span class="card-tag">${data.category}</span>
                    </div>
                `;
                card.addEventListener('click', () => highlightModelConnections(data.id));
            } else {
                card.dataset.category = data.category;
                card.dataset.models = data.models.join(',');
                card.innerHTML = `
                    <div class="card-date">${data.date}</div>
                    <div class="card-title">${data.title}</div>
                    <div class="card-excerpt">${data.excerpt}</div>
                    <div class="card-connection">${data.connection}</div>
                    <div class="card-tags">
                        <span class="card-tag">${data.category}</span>
                        ${data.models.map(m => `<span class="card-tag">#${m}</span>`).join('')}
                    </div>
                `;
                card.addEventListener('click', () => highlightCardConnections(card));
            }
            
            return card;
        }

        // ============================================
        // INTERACTION & HIGHLIGHTING
        // ============================================

        function highlightCardConnections(card) {
            clearHighlights();
            card.classList.add('highlighted');
            
            // Get card position for neural network brightening
            const rect = card.getBoundingClientRect();
            activeCardPosition = {
                x: rect.left + rect.width / 2,
                y: rect.top + rect.height / 2 + window.scrollY
            };
            
            const models = card.dataset.models.split(',');
            models.forEach(modelId => {
                const modelCard = document.querySelector(`[data-model-id="${modelId}"]`);
                if (modelCard) {
                    modelCard.classList.add('highlighted');
                    highlightedModels.add(modelId);
                }
            });
        }

        function highlightModelConnections(modelId) {
            clearHighlights();
            
            const modelCard = document.querySelector(`[data-model-id="${modelId}"]`);
            if (modelCard) {
                modelCard.classList.add('highlighted');
                highlightedModels.add(modelId);
                
                // Get model card position for neural network brightening
                const rect = modelCard.getBoundingClientRect();
                activeCardPosition = {
                    x: rect.left + rect.width / 2,
                    y: rect.top + rect.height / 2 + window.scrollY
                };
            }
            
            document.querySelectorAll('.card:not(.mental-model)').forEach(card => {
                const models = card.dataset.models.split(',');
                if (models.includes(modelId)) {
                    card.classList.add('highlighted');
                }
            });
        }

        function clearHighlights() {
            document.querySelectorAll('.card').forEach(c => c.classList.remove('highlighted'));
            highlightedModels.clear();
            activeCardPosition = null; // Reset neural network brightening
        }

        // ============================================
        // EVENT LISTENERS
        // ============================================

        function setupEventListeners() {
            // Tab switching
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.addEventListener('click', () => switchTab(tab.dataset.tab));
            });
            
            // Dim toggle
            document.getElementById('dimToggle').addEventListener('click', toggleDim);
            
            // Clear highlights on background click
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.card')) {
                    clearHighlights();
                }
            });
        }

        function switchTab(tab) {
            currentTab = tab;
            clearHighlights();
            
            document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
            document.querySelector(`[data-tab="${tab}"]`).classList.add('active');
            
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.querySelector(`[data-tab-content="${tab}"]`).classList.add('active');
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function toggleDim() {
            isDimmed = !isDimmed;
            canvas.classList.toggle('dimmed');
            document.getElementById('dimText').textContent = isDimmed ? 'brighten network' : 'dim network';
        }
    </script>
</body>
</html>
